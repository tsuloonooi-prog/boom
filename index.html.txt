<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>我的炮商城</title>
<style>
body { font-family: Arial, sans-serif; background: #fff8f0; margin: 0; padding: 0; }
header { background: #ff4d4d; color: white; padding: 1em; text-align: center; }
.container { display: flex; flex-wrap: wrap; justify-content: center; padding: 1em; }
.product { border: 1px solid #ddd; border-radius: 8px; margin: 0.5em; padding: 1em; width: 200px; text-align: center; background: #fff; }
.product img { width: 100%; height: 150px; object-fit: cover; border-radius: 5px; }
button { background: #ff4d4d; color: white; border: none; padding: 0.5em 1em; border-radius: 5px; cursor: pointer; margin-top: 0.5em; }
button:hover { background: #e64444; }
.cart { position: fixed; top: 10px; right: 10px; background: #ffcc00; padding: 1em; border-radius: 10px; }
.cart-items { margin: 0; padding: 0; list-style: none; }
.cart-items li { margin-bottom: 0.5em; }
</style>
</head>
<body>

<header>
  <h1>炮商城</h1>
</header>

<div class="cart">
  <h3>购物车</h3>
  <ul class="cart-items"></ul>
  <strong>总价: RM <span id="total">0</span></strong>
</div>

<div class="container" id="product-list">
  <!-- 商品会通过 JS 自动生成 -->
</div>

<script>
// 示例 100 种商品数据
const products = [];
for (let i = 1; i <= 100; i++) {
  products.push({id: i, name: `炮 ${i}`, price: (Math.random()*10+1).toFixed(2), img: 'https://via.placeholder.com/200x150'});
}

const productList = document.getElementById('product-list');
const cartItemsEl = document.querySelector('.cart-items');
const totalEl = document.getElementById('total');

let cart = [];

function updateCart() {
  cartItemsEl.innerHTML = '';
  let total = 0;
  cart.forEach(item => {
    const li = document.createElement('li');
    li.textContent = `${item.name} x ${item.qty} - RM ${(item.price*item.qty).toFixed(2)}`;
    cartItemsEl.appendChild(li);
    total += item.price * item.qty;
  });
  totalEl.textContent = total.toFixed(2);
}

function addToCart(product) {
  const existing = cart.find(p => p.id === product.id);
  if (existing) {
    existing.qty++;
  } else {
    cart.push({...product, qty: 1});
  }
  updateCart();
}

// 生成商品列表
products.forEach(product => {
  const div = document.createElement('div');
  div.className = 'product';
  div.innerHTML = `
    <img src="${product.img}" alt="${product.name}">
    <h4>${product.name}</h4>
    <p>RM ${product.price}</p>
    <button onclick="addToCart(${product.id})">加入购物车</button>
  `;
  productList.appendChild(div);
});

// 将 product.id 对应到 products 对象
window.addToCart = function(id) {
  const product = products.find(p => p.id === id);
  addToCart(product);
};
</script>

</body>
</html>
